#!/bin/bash
# 测试所有 - 包含浏览器测试

echo "🔍 运行所有测试..."
echo ""

# 1. 命令行测试
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "【1/3】命令行测试"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
./test-mobile-verify.sh
RESULT1=$?
echo ""

# 2. 打开浏览器自动测试
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "【2/3】浏览器自动测试"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🌐 正在打开浏览器..."
open http://localhost:3000/test-auto-verify.html
echo "✅ 已在浏览器中打开自动测试（会自动运行）"
echo ""

# 3. 提示手动测试
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "【3/3】手动测试（可选）"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "如需手动测试，访问:"
echo "  http://localhost:3000/test-mobile-verification.html"
echo ""

# 总结
if [ $RESULT1 -eq 0 ]; then
    echo "╔══════════════════════════════════════════════╗"
    echo "║  ✅ 命令行测试通过                            ║"
    echo "║  🌐 浏览器测试已打开                           ║"
    echo "║  📋 请在浏览器中查看详细测试结果               ║"
    echo "╚══════════════════════════════════════════════╝"
else
    echo "╔══════════════════════════════════════════════╗"
    echo "║  ⚠️  命令行测试有失败项                       ║"
    echo "║  🌐 浏览器测试已打开                           ║"
    echo "║  📋 请查看浏览器中的详细诊断信息               ║"
    echo "╚══════════════════════════════════════════════╝"
fi
