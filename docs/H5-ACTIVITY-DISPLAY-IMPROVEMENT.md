# H5ç§»åŠ¨ç«¯æ´»åŠ¨å±•ç¤ºä¼˜åŒ–æ–¹æ¡ˆ

**åˆ›å»ºæ—¶é—´**: 2026-01-29
**éœ€æ±‚**: ä¼˜åŒ–ç§»åŠ¨ç«¯æ´»åŠ¨å±•ç¤ºäº¤äº’ä½“éªŒ

---

## ğŸ“± å½“å‰é—®é¢˜

### å½“å‰è¡Œä¸º

1. **ç‚¹å‡»æ—¥æœŸå**ï¼šç­›é€‰æ˜¾ç¤ºå½“å¤©æ´»åŠ¨ï¼ˆéšè—å…¶ä»–å¤©ï¼‰
2. **è¿”å›æ“ä½œ**ï¼šéœ€è¦ç‚¹å‡»è¿”å›æŒ‰é’®æ‰èƒ½çœ‹åˆ°å…¶ä»–æ´»åŠ¨
3. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - âŒ æ— æ³•åŒæ—¶çœ‹åˆ°å¤šå¤©çš„æ´»åŠ¨
   - âŒ éœ€è¦é¢‘ç¹åˆ‡æ¢/è¿”å›
   - âŒ ç¼ºä¹æ•´ä½“è§†å›¾

### ç¤ºæ„å›¾

```
å½“å‰è¡Œä¸º:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—¥å†: [ä¸€][äºŒ][ä¸‰]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â† è¿”å›  å‘¨ä¸€æ´»åŠ¨   â”‚
â”‚  â€¢ æ´»åŠ¨A            â”‚
â”‚  â€¢ æ´»åŠ¨B            â”‚
â”‚  (å…¶ä»–å¤©è¢«éšè—)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

### æ–°éœ€æ±‚

1. **å±•ç¤ºå…¨éƒ¨æ´»åŠ¨**ï¼šå§‹ç»ˆæ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨ï¼Œä¸ç­›é€‰
2. **å½“å¤©æ´»åŠ¨ç½®é¡¶**ï¼šé€‰ä¸­çš„å½“å¤©æ´»åŠ¨å›ºå®šåœ¨é¡¶éƒ¨
3. **è‡ªåŠ¨åˆ‡æ¢é«˜äº®**ï¼šåˆ‡æ¢æ—¥æœŸæ—¶ï¼Œè‡ªåŠ¨æ»šåŠ¨å¹¶é«˜äº®è¯¥å¤©æ´»åŠ¨
4. **æ›´å¥½çš„äº¤äº’**ï¼šæ— éœ€è¿”å›æŒ‰é’®ï¼Œç›´æ¥ç‚¹å‡»æ—¥æœŸåˆ‡æ¢

### ç¤ºæ„å›¾

```
ä¼˜åŒ–å:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—¥å†: [ä¸€][äºŒ][ä¸‰]  â”‚ â† ç‚¹å‡»ä»»æ„æ—¥æœŸ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… å‘¨ä¸€æ´»åŠ¨ (2ä¸ª)  â”‚ â† å›ºå®šåœ¨é¡¶éƒ¨
â”‚  â­ â€¢ æ´»åŠ¨A (é«˜äº®)  â”‚
â”‚  â­ â€¢ æ´»åŠ¨B (é«˜äº®)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… å‘¨äºŒæ´»åŠ¨ (1ä¸ª)  â”‚
â”‚    â€¢ æ´»åŠ¨C          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“… å‘¨ä¸‰æ´»åŠ¨ (3ä¸ª)  â”‚
â”‚    â€¢ æ´»åŠ¨D          â”‚
â”‚    â€¢ æ´»åŠ¨E          â”‚
â”‚    â€¢ æ´»åŠ¨F          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. ä¿®æ”¹ `renderScheduleList` å‡½æ•°

**å½“å‰é€»è¾‘**ï¼š
```javascript
function renderScheduleList(activities) {
    const filtered = filterActivities();
    // æ ¹æ®ç­›é€‰æ¡ä»¶æ˜¾ç¤ºæ´»åŠ¨
}
```

**ä¼˜åŒ–å**ï¼š
```javascript
function renderScheduleList(activities, selectedDay = null) {
    // 1. å§‹ç»ˆæ˜¾ç¤ºæ‰€æœ‰æ´»åŠ¨
    // 2. æŒ‰æ—¥æœŸåˆ†ç»„
    // 3. å¦‚æœæœ‰é€‰ä¸­æ—¥æœŸï¼Œè¯¥å¤©çš„æ´»åŠ¨æ”¾åœ¨æœ€å‰é¢
    // 4. ä¸ºé€‰ä¸­çš„æ´»åŠ¨æ·»åŠ é«˜äº®æ ·å¼

    const groupedByDay = groupActivitiesByDay(activities);

    if (selectedDay !== null) {
        // å°†é€‰ä¸­çš„æ—¥æœŸç»„ç§»åˆ°æœ€å‰é¢
        const selected = groupedByDay[selectedDay];
        delete groupedByDay[selectedDay];
        return {
            [selectedDay]: selected,
            ...groupedByDay
        };
    }

    return groupedByDay;
}
```

### 2. åˆ›å»ºåˆ†ç»„æ˜¾ç¤ºå‡½æ•°

```javascript
/**
 * æŒ‰æ—¥æœŸåˆ†ç»„å¹¶æ¸²æŸ“æ´»åŠ¨åˆ—è¡¨
 */
function renderGroupedActivities(activities, selectedDay = null) {
    // æŒ‰æ—¥æœŸåˆ†ç»„
    const grouped = {};
    activities.forEach(act => {
        if (!grouped[act.day]) {
            grouped[act.day] = [];
        }
        grouped[act.day].push(act);
    });

    // å¦‚æœæœ‰é€‰ä¸­çš„æ—¥æœŸï¼Œå°†å…¶ç§»åˆ°æœ€å‰é¢
    let dayKeys = Object.keys(grouped).map(Number).sort((a, b) => a - b);
    if (selectedDay !== null && grouped[selectedDay]) {
        dayKeys = dayKeys.filter(k => k !== selectedDay);
        dayKeys.unshift(selectedDay); // æ’å…¥åˆ°å¼€å¤´
    }

    // æ¸²æŸ“HTML
    let html = '';
    dayKeys.forEach(day => {
        const dayActivities = grouped[day];
        const isSelected = day === selectedDay;

        html += `
            <div class="day-group ${isSelected ? 'day-group-selected' : ''}" data-day="${day}">
                <div class="day-group-header">
                    <span class="day-name">${dayNames[day]}</span>
                    <span class="day-count">${dayActivities.length}ä¸ªæ´»åŠ¨</span>
                </div>
                <div class="day-group-activities">
                    ${dayActivities.map(act => `
                        <div class="schedule-item ${isSelected ? 'activity-highlight' : ''}" data-activity-id="${act.id}">
                            <!-- æ´»åŠ¨å†…å®¹ -->
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
    });

    return html;
}
```

### 3. æ·»åŠ CSSæ ·å¼

```css
/* æ—¥æœŸåˆ†ç»„å®¹å™¨ */
.day-group {
    margin-bottom: 20px;
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
}

/* é€‰ä¸­çš„æ—¥æœŸç»„ - å›ºå®šåœ¨é¡¶éƒ¨ */
.day-group-selected {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
    position: sticky;
    top: 120px; /* æ ¹æ®headeré«˜åº¦è°ƒæ•´ */
    z-index: 100;
}

/* æ—¥æœŸç»„å¤´éƒ¨ */
.day-group-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: #f5f5f5;
    border-left: 4px solid #667eea;
    font-weight: 600;
}

.day-group-selected .day-group-header {
    background: rgba(255, 255, 255, 0.95);
    color: #667eea;
}

/* é«˜äº®æ´»åŠ¨å¡ç‰‡ */
.activity-highlight {
    background: #fff;
    border: 2px solid #667eea !important;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* æ´»åŠ¨å¡ç‰‡åŠ¨ç”» */
.schedule-item {
    transition: all 0.3s ease;
}

.schedule-item:hover {
    transform: translateX(4px);
}
```

### 4. ä¿®æ”¹ `toggleDayFilter` å‡½æ•°

```javascript
function toggleDayFilter(day) {
    console.log('ğŸ—“ï¸ ç‚¹å‡»æ—¥æœŸç­›é€‰:', day, `(${dayNames[day]})`);

    if (currentFilters.day === day) {
        // å†æ¬¡ç‚¹å‡»å–æ¶ˆé€‰ä¸­
        console.log('âœ‹ å–æ¶ˆæ—¥æœŸé«˜äº®');
        currentFilters.day = null;
        lastSelectedDay = null;
    } else {
        // é€‰ä¸­æ–°æ—¥æœŸ
        console.log('âœ… è®¾ç½®æ—¥æœŸé«˜äº®:', day);
        currentFilters.day = day;
        lastSelectedDay = day;

        // ğŸ†• è‡ªåŠ¨æ»šåŠ¨åˆ°è¯¥æ—¥æœŸç»„
        setTimeout(() => {
            const dayGroup = document.querySelector(`.day-group[data-day="${day}"]`);
            if (dayGroup) {
                dayGroup.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });

                // æ·»åŠ è„‰å†²åŠ¨ç”»
                dayGroup.style.animation = 'pulse 0.6s ease';
                setTimeout(() => {
                    dayGroup.style.animation = '';
                }, 600);
            }
        }, 100);
    }

    // æ›´æ–°è§†å›¾ï¼ˆä½¿ç”¨æ–°çš„åˆ†ç»„æ¸²æŸ“ï¼‰
    updateViews();
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}
```

### 5. ç§»åŠ¨ç«¯ä¼˜åŒ–

```css
@media (max-width: 768px) {
    /* é€‰ä¸­æ—¥æœŸç»„åœ¨ç§»åŠ¨ç«¯æ›´çªå‡º */
    .day-group-selected {
        top: 120px;
        margin: 0 -8px; /* æŠµæ¶ˆpadding */
        border-radius: 12px;
    }

    /* æ—¥æœŸç»„å¤´éƒ¨æ›´ç´§å‡‘ */
    .day-group-header {
        padding: 10px 12px;
        font-size: 14px;
    }

    /* æ´»åŠ¨å¡ç‰‡é—´è·ä¼˜åŒ– */
    .day-group-activities {
        padding: 0 8px;
    }

    /* æ´»åŠ¨å¡ç‰‡ */
    .schedule-item {
        margin-bottom: 8px;
    }
}
```

---

## ğŸ“Š äº¤äº’æµç¨‹å¯¹æ¯”

### ä¿®æ”¹å‰

```
ç”¨æˆ·æ“ä½œæµç¨‹:
1. ç‚¹å‡»"å‘¨ä¸€"
2. é¡µé¢åˆ‡æ¢åˆ°è¯¦æƒ…è§†å›¾
3. åªçœ‹åˆ°å‘¨ä¸€çš„æ´»åŠ¨
4. æƒ³çœ‹å‘¨äºŒçš„æ´»åŠ¨
5. ç‚¹å‡»è¿”å›æŒ‰é’® â† çƒ¦æ¼
6. å†æ¬¡ç‚¹å‡»"å‘¨äºŒ"
7. åªçœ‹åˆ°å‘¨äºŒçš„æ´»åŠ¨
```

### ä¿®æ”¹å

```
ç”¨æˆ·æ“ä½œæµç¨‹:
1. ç‚¹å‡»"å‘¨ä¸€"
2. å‘¨ä¸€æ´»åŠ¨è‡ªåŠ¨æ»šåŠ¨åˆ°é¡¶éƒ¨å¹¶é«˜äº® âœ…
3. åŒæ—¶èƒ½çœ‹åˆ°æ‰€æœ‰å…¶ä»–å¤©çš„æ´»åŠ¨ âœ…
4. æƒ³çœ‹å‘¨äºŒçš„æ´»åŠ¨
5. ç›´æ¥ç‚¹å‡»"å‘¨äºŒ" â† æ–¹ä¾¿
6. å‘¨äºŒæ´»åŠ¨è‡ªåŠ¨æ»šåŠ¨åˆ°é¡¶éƒ¨å¹¶é«˜äº® âœ…
7. æ— éœ€è¿”å›ï¼Œæ‰€æœ‰æ´»åŠ¨éƒ½å¯è§ âœ…
```

---

## ğŸ é¢å¤–ä¼˜åŒ–

### ä¼˜åŒ–1: å¿«é€Ÿè·³è½¬æŒ‰é’®

```javascript
// åœ¨é€‰ä¸­æ—¥æœŸç»„æ·»åŠ "è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ´»åŠ¨æ—¥"æŒ‰é’®
function addQuickNavigation() {
    if (currentFilters.day !== null) {
        const nextDay = findNextDayWithActivities(currentFilters.day);
        if (nextDay !== null) {
            return `
                <button class="next-day-btn" onclick="toggleDayFilter(${nextDay})">
                    è·³è½¬åˆ°${dayNames[nextDay]} â†’
                </button>
            `;
        }
    }
    return '';
}
```

### ä¼˜åŒ–2: æ´»åŠ¨æ•°é‡æç¤º

```javascript
// åœ¨æ—¥å†æ ¼å­æ˜¾ç¤ºæ´»åŠ¨æ•°é‡
function renderDayCell(day, activities) {
    const count = activities.filter(act => act.day === day).length;
    return `
        <div class="day-cell" onclick="toggleDayFilter(${day})">
            <div class="day-name">${dayNames[day]}</div>
            <div class="day-activity-count">${count}ä¸ª</div>
        </div>
    `;
}
```

### ä¼˜åŒ–3: å¹³æ»‘æ»šåŠ¨åŠ¨ç”»

```css
/* å¹³æ»‘æ»šåŠ¨åˆ°é€‰ä¸­æ—¥æœŸ */
html {
    scroll-behavior: smooth;
}

/* é€‰ä¸­æ—¥æœŸç»„çš„æ¸å…¥åŠ¨ç”» */
.day-group-selected {
    animation: slideDown 0.4s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
```

---

## âœ… å®ç°æ£€æŸ¥æ¸…å•

### æ ¸å¿ƒåŠŸèƒ½

- [ ] ä¿®æ”¹ `renderScheduleList` æ”¯æŒåˆ†ç»„æ˜¾ç¤º
- [ ] åˆ›å»º `renderGroupedActivities` å‡½æ•°
- [ ] æ·»åŠ  `.day-group` ç›¸å…³CSSæ ·å¼
- [ ] ä¿®æ”¹ `toggleDayFilter` å®ç°è‡ªåŠ¨æ»šåŠ¨
- [ ] æ·»åŠ é«˜äº®åŠ¨ç”»æ•ˆæœ

### ç§»åŠ¨ç«¯ä¼˜åŒ–

- [ ] è°ƒæ•´stickyå®šä½é«˜åº¦
- [ ] ä¼˜åŒ–è§¦æ‘¸ç›®æ ‡å°ºå¯¸
- [ ] æµ‹è¯•æ»šåŠ¨æ€§èƒ½
- [ ] ä¼˜åŒ–åŠ¨ç”»æµç•…åº¦

### æµ‹è¯•éªŒè¯

- [ ] ç‚¹å‡»æ—¥æœŸåæ­£ç¡®é«˜äº®
- [ ] æ»šåŠ¨æ—¶é€‰ä¸­æ—¥æœŸä¿æŒå›ºå®š
- [ ] åˆ‡æ¢æ—¥æœŸæ—¶å¹³æ»‘è¿‡æ¸¡
- [ ] æ‰€æœ‰æ´»åŠ¨éƒ½å¯è§
- [ ] ç§»åŠ¨ç«¯è§¦æ‘¸ä½“éªŒè‰¯å¥½

---

## ğŸš€ å®ç°æ­¥éª¤

### æ­¥éª¤1: åˆ›å»ºæ–°å‡½æ•°

åœ¨ `index.html` ä¸­æ·»åŠ  `renderGroupedActivities` å‡½æ•°

### æ­¥éª¤2: ä¿®æ”¹ç°æœ‰å‡½æ•°

æ›´æ–° `renderScheduleList` å’Œ `toggleDayFilter`

### æ­¥éª¤3: æ·»åŠ CSSæ ·å¼

æ·»åŠ åˆ†ç»„å’Œé«˜äº®æ ·å¼

### æ­¥éª¤4: æµ‹è¯•éªŒè¯

åœ¨ç§»åŠ¨ç«¯æµ‹è¯•äº¤äº’æ•ˆæœ

---

**åˆ›å»ºæ—¶é—´**: 2026-01-29
**ä¼˜å…ˆçº§**: P0 (é«˜ä¼˜å…ˆçº§ç”¨æˆ·ä½“éªŒæ”¹è¿›)
**é¢„è®¡å½±å“**: æ˜¾è‘—æ”¹å–„ç§»åŠ¨ç«¯æ´»åŠ¨æµè§ˆä½“éªŒ
