# 📋 市集数据字段映射确认

## Excel文件字段列表（当前18列）

```
1. 序号
2. 活动编号 (activityNumber) ⭐ 唯一标识
3. 活动标题 (title)
4. 分类 (category)
5. 地点 (location)
6. 价格 (price)
7. 需要预约 (requireBooking)
8. 时间 (time) ⭐ 格式：HH:MM-HH:MM
9. 持续时间 (duration)
10. 时间信息 (timeInfo)
11. 星期 (weekdays) ⭐ 格式：周一,周二,周三
12. 最低价格 (minPrice)
13. 最高价格 (maxPrice)
14. 最大人数 (maxPeople)
15. 描述 (description)
16. 灵活时间 (flexibleTime)
17. 状态 (status)
18. (可能还有其他字段)
```

---

## 🎯 字段映射方案

### 方案A：完整映射（推荐）

| 市集数据字段 | Excel字段 | 映射规则 | 示例 |
|------------|----------|---------|------|
| **市集名称** | 活动标题 | 直接映射 | "宁曼路复古市集" |
| **市集名称** | 活动编号 | 生成编号：0022-0037 | "0022" |
| - | 分类 | 固定值 | "市集" |
| **导航定位** | 地点 | 直接映射 | "One Nimman" |
| **对应地点** | 描述 | 补充位置信息 | "清迈宁曼路（One Nimman商圈内）" |
| **营业时间** | 时间 | 提取时间部分 | "16:00-22:00" |
| **营业时间** | 星期 | 提取星期部分 | "周一,周二" |
| **营业时间** | 持续时间 | 计算时长 | "6小时" |
| - | 时间信息 | 固定值 | "固定频率活动" |
| **特色/备注** | 描述 | 合并到描述 | "中古爱好者必逛，各式复古风格二手商品" |
| - | 价格 | 固定值 | "免费入场" 或空 |
| - | 需要预约 | 固定值 | "否" |
| - | 灵活时间 | 固定值 | "否" |
| - | 状态 | 固定值 | "进行中" |
| **特色/备注** | 持续时间 | 如果有提到 | 根据实际情况 |

### 关键处理逻辑

#### 1. 营业时间解析 ⭐ 重要

**格式**：`周一、周二 16:00-22:00`
**需要拆分为**：
- `时间`: "16:00-22:00"
- `星期`: "周一,周二"

**特殊情况**：
- "每日" → "周一,周二,周三,周四,周五,周六,周日"
- "周六、周日" → "周六,周日"
- "每天24小时营业" → "00:00-24:00" + "周一,周二,周三,周四,周五,周六,周日"

#### 2. 营业时间优先级

**周六夜市**：
```
图片信息：18:00-23:00
文本信息：18:00-23:00
统一为：17:00-23:00（图片主流表述）
```
→ **最终**：时间 = "17:00-23:00"，星期 = "周六"

#### 3. 描述字段合并

```
描述 = 对应地点 + 特色/备注

示例：
- 对应地点：清迈宁曼路（One Nimman商圈内）
- 特色/备注：中古爱好者必逛，各式复古风格二手商品
- 最终描述：清迈宁曼路（One Nimman商圈内）。中古爱好者必逛，各式复古风格二手商品
```

#### 4. 价格字段

市集通常：
- **免费入场** → 价格 = "免费" 或 "免费入场"
- **有摊位费** → 价格 = "具体价格"
- **不确定** → 价格 = "" 或 "待定"

---

## 📊 数据示例（前3条市集）

### 1. 宁曼路复古市集

```json
{
  "序号": 19,
  "活动编号": "0022",
  "活动标题": "宁曼路复古市集",
  "分类": "市集",
  "地点": "One Nimman",
  "价格": "免费",
  "需要预约": "否",
  "时间": "16:00-22:00",
  "持续时间": "6小时",
  "时间信息": "固定频率活动",
  "星期": "周一,周二",
  "最低价格": 0,
  "最高价格": 0,
  "最大人数": "不限",
  "描述": "清迈宁曼路（One Nimman商圈内）。中古爱好者必逛，各式复古风格二手商品",
  "灵活时间": "否",
  "状态": "进行中"
}
```

### 2. 宁曼路白色市集

```json
{
  "序号": 20,
  "活动编号": "0023",
  "活动标题": "宁曼路白色市集",
  "分类": "市集",
  "地点": "One Nimman",
  "价格": "免费",
  "需要预约": "否",
  "时间": "15:00-22:00",
  "持续时间": "7小时",
  "时间信息": "固定频率活动",
  "星期": "周五,周六,周日,周一",
  "最低价格": 0,
  "最高价格": 0,
  "最大人数": "不限",
  "描述": "清迈宁曼路（One Nimman商圈内）。日式文艺市集，日系文艺风为主",
  "灵活时间": "否",
  "状态": "进行中"
}
```

### 3. 云南早市

```json
{
  "序号": 21,
  "活动编号": "0024",
  "活动标题": "云南早市",
  "分类": "市集",
  "地点": "Yunnan Market",
  "价格": "免费",
  "需要预约": "否",
  "时间": "05:00-12:00",
  "持续时间": "7小时",
  "时间信息": "固定频率活动",
  "星期": "周五",
  "最低价格": 0,
  "最高价格": 0,
  "最大人数": "不限",
  "描述": "清迈古城以北，Chang Phueak区附近。以贩售云南穆斯林家乡味、云南小吃为主",
  "灵活时间": "否",
  "状态": "进行中"
}
```

---

## 🔄 特殊情况处理

### 1. JING JAI 市集（多时段）

```
日常 8:30-21:00
周末（周六、周日）6:30-22:00
每月第一个周四 9:00-18:00
每月第一个周五 16:00-22:00
```

**处理方案A**：拆分为多个活动
- 活动1：JING JAI 市集（日常）
  - 时间：08:30-21:00
  - 星期：周一,周二,周三,周四,周五

- 活动2：JING JAI 市集（周末）
  - 时间：06:30-22:00
  - 星期：周六,周日

**处理方案B**：使用多时间格式
- 时间：08:30-21:00, 06:30-22:00
- 星期：周一,周二,周三,周四,周五,周六,周日
- 描述中说明差异

### 2. 面包集市（多时段）

```
周六 7:00-11:00
补充：周六日核心营业时段 9:00-16:00
```

**处理方案**：使用更长的时间段
- 时间：07:00-16:00
- 星期：周六,周日

### 3. 24小时营业（孟买市场）

```
每天24小时营业
```

**处理方案**：
- 时间：00:00-24:00
- 星期：周一,周二,周三,周四,周五,周六,周日

---

## ✅ 确认事项

### 需要确认的问题

1. **活动编号**
   - 当前最大编号：0021（椰林集市）
   - 新增编号：0022-0037（16个市集）
   - ✅ 是否同意？

2. **分类字段**
   - 建议：统一使用"市集"
   - ✅ 是否同意？

3. **价格字段**
   - 建议：统一使用"免费"或"免费入场"
   - ✅ 是否同意？

4. **描述字段**
   - 建议：合并"对应地点" + "特色/备注"
   - ✅ 是否同意？

5. **特殊市集处理**
   - JING JAI 市集：是否拆分为2个活动？
   - 面包集市：使用7:00-16:00？
   - ✅ 是否同意？

---

## 📝 下一步

### 选项1：确认后自动导入
```
确认映射方案 → 我生成完整JSON数据 → 智能自动导入系统导入
```

### 选项2：手动添加到Excel
```
我生成Excel格式的数据 → 你手动复制粘贴到Excel
```

### 选项3：生成导入脚本
```
我生成专用脚本 → 一键导入市集数据
```

---

**请确认：**
1. ✅ 字段映射方案是否正确？
2. ✅ 特殊情况处理是否合理？
3. ✅ 哪种导入方式？

确认后我将立即准备数据并导入！
