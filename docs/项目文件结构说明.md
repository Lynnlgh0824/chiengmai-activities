# 清迈活动平台 - 项目文件结构说明

**版本**: v1.0.7
**更新日期**: 2026-01-28
**状态**: ✅ 已整理完成

---

## 📁 项目结构总览

```
Chiengmai/
├── 核心文件
│   ├── index.html              # 主页面（PC + H5自适应）
│   ├── server.cjs              # 后端服务器
│   ├── app-version.json        # 应用版本配置
│   └── package.json            # Node.js依赖配置
│
├── 数据目录
│   ├── data/
│   │   ├── items.json          # 活动数据（45个活动）
│   │   ├── version.json        # 数据版本号（v1.0.6）
│   │   ├── guide.json          # 导游数据
│   │   └── requirements-log.json # 需求日志
│   │
│   └── uploads/                # 文件上传目录
│
├── 管理功能
│   └── public/
│       └── admin.html          # 管理页面（通过/admin.html访问）
│
├── 测试系统
│   ├── test-dashboard.html           # 综合测试面板（17项测试）
│   ├── test-suspended-filter.html    # Suspended过滤专项测试
│   ├── test-suspended-filter.cjs     # 测试脚本
│   ├── version-info.html             # 版本信息展示页面
│   │
│   └── scripts/
│       └── test-suspended-full.cjs   # 全链路测试脚本（27项）
│
├── 文档目录
│   └── docs/
│       ├── 测试思维方法论.md          # 测试原则和方法
│       ├── 测试功能说明.md            # 测试使用指南
│       ├── 全链路功能开发检查清单.md  # 开发检查清单
│       ├── 活动暂停状态方案-简化版.md # 功能方案文档
│       ├── 前端功能优化完成报告.md    # 优化完成报告
│       └── 项目文件结构说明.md        # 本文档
│
└── 历史测试文件（待清理）
    ├── test-flexible-tab.html        # Tab测试
    ├── test-page.html                # 页面测试
    ├── test-render.html              # 渲染测试
    ├── check-tabs.html               # Tab检查
    ├── verify-tabs.html              # Tab验证
    ├── verify-browser.html           # 浏览器验证
    ├── test-enhanced.cjs             # 增强测试脚本
    ├── test-filtering.cjs            # 过滤测试脚本
    ├── test-music-tab.cjs            # 音乐Tab测试
    ├── test-quick-verify.cjs         # 快速验证测试
    └── test-ui-auto.cjs              # UI自动化测试
```

---

## 🎯 核心文件说明

### 1. 主页面（index.html）
- **功能**: 活动展示主页面，支持PC和H5两种模式
- **特性**:
  - ✅ 自动检测设备类型（User-Agent）
  - ✅ URL参数控制（`?mode=h5` 强制H5模式）
  - ✅ Suspended状态过滤
  - ✅ 版本号机制（自动检测更新）
  - ✅ 响应式设计
- **访问**: `http://localhost:3000/index.html`
- **H5模式**: `http://localhost:3000/index.html?mode=h5`

### 2. 后端服务器（server.cjs）
- **功能**: Express.js后端服务
- **端口**: 3000
- **主要API**:
  - `GET /api/activities` - 获取活动列表
  - `GET /api/version` - 获取数据版本号
  - `GET /app/version` - 获取应用版本号（v1.0.7）
  - `POST /api/items` - 添加活动
  - `PUT /api/items/:activityNumber` - 更新活动
  - `DELETE /api/items/:activityNumber` - 删除活动

### 3. 应用版本配置（app-version.json）
```json
{
  "version": "v1.0.7",
  "fullVersion": "1.0.7",
  "codeName": "Unified Platform",
  "buildDate": "2026-01-28",
  "features": [
    "suspended状态过滤功能",
    "版本号机制（前后端统一）",
    "综合测试面板（17项测试）",
    "H5模式自动切换",
    "PC/H5导航区分",
    "测试思维方法论文档"
  ],
  "changelog": "实现H5模式自动切换，统一项目代码结构"
}
```

---

## 🧪 测试系统说明

### 综合测试面板（test-dashboard.html）
**推荐使用** ⭐⭐⭐

- **测试数量**: 17项
- **测试模块**: 5个
  1. 📊 数据层测试（4项）
  2. 🌐 API层测试（4项）
  3. 💼 业务逻辑与前端过滤测试（6项）
  4. 📦 版本信息测试（3项）
  5. 👤 用户体验测试（3项）
- **访问**: `http://localhost:3000/test-dashboard.html`

### Suspended过滤专项测试
- **测试数量**: 4项
- **访问**: `http://localhost:3000/test-suspended-filter.html`

### 全链路测试脚本
- **测试数量**: 27项
- **运行**: `node scripts/test-suspended-full.cjs`
- **覆盖**: 数据层、API层、业务逻辑、用户体验、文档完整性

### 版本信息页面
- **功能**: 展示当前数据版本号、更新时间、活动总数
- **访问**: `http://localhost:3000/version-info.html`

---

## 📚 文档系统说明

### 测试思维方法论（docs/测试思维方法论.md）
- **大小**: 12KB
- **内容**:
  - 核心测试原则（金字塔、全链路、TDD）
  - 测试设计方法（等价类、边界值、状态转换）
  - 测试分类体系
  - 测试实施流程（5阶段）
  - 测试用例设计实战
  - 常见测试误区
  - 测试改进策略

### 测试功能说明（docs/测试功能说明.md）
- **内容**:
  - 测试思维与方法论概览
  - 测试页面列表和访问地址
  - 测试覆盖维度（6个层次）
  - 快速开始指南
  - 测试结果解读
  - 相关链接

### 全链路功能开发检查清单（docs/全链路功能开发检查清单.md）
- **内容**:
  - 6层测试检查清单
  - 开发流程标准
  - 验收标准

### 活动暂停状态方案（docs/活动暂停状态方案-简化版.md）
- **内容**:
  - Suspended功能设计方案
  - 实现细节
  - 测试要点

### 前端功能优化完成报告（docs/前端功能优化完成报告.md）
- **内容**:
  - 优化目标
  - 完成的优化内容
  - 优化前后对比
  - 访问地址总结
  - 验收清单

---

## 🌐 访问地址汇总

### 主要页面
| 页面 | 地址 | 说明 |
|------|------|------|
| 🏠 PC主页 | http://localhost:3000/index.html | 桌面端显示 |
| 📱 H5主页 | http://localhost:3000/index.html?mode=h5 | 移动端显示 |
| 🎛️ 管理页面 | http://localhost:3000/admin.html | 活动管理 |

### 测试页面
| 页面 | 地址 | 测试数量 |
|------|------|---------|
| 🎯 综合测试面板 | http://localhost:3000/test-dashboard.html | 17项 ⭐ |
| 🧪 Suspended测试 | http://localhost:3000/test-suspended-filter.html | 4项 |
| 📦 版本信息 | http://localhost:3000/version-info.html | - |

### API端点
| 端点 | 说明 | 返回示例 |
|------|------|---------|
| `/app/version` | 应用版本号 | `v1.0.7` |
| `/api/version` | 数据版本号 | `v1.0.6` |
| `/api/activities` | 活动数据API | 45个活动 |

### 文档
| 文档 | 地址 |
|------|------|
| 🎓 测试思维方法论 | http://localhost:3000/docs/测试思维方法论.md |
| 📚 测试功能说明 | http://localhost:3000/docs/测试功能说明.md |
| 📋 开发检查清单 | http://localhost:3000/docs/全链路功能开发检查清单.md |
| 📝 优化完成报告 | http://localhost:3000/docs/前端功能优化完成报告.md |

---

## 🔧 版本管理机制

### 前后端版本号统一
- **应用版本**: [app-version.json](app-version.json) - v1.0.7
- **数据版本**: [data/version.json](data/version.json) - v1.0.6
- **自动同步**: 当数据更新时，server.cjs自动使用app-version.json中的版本号

### 版本更新通知
- **前端检测**: index.html页面加载时自动检查版本
- **localStorage**: 存储用户本地版本号
- **提示机制**: 版本不同时显示顶部通知横幅

---

## 🚀 快速启动

### 1. 启动服务器
```bash
cd /Users/yuzhoudeshengyin/Documents/my_project/Chiengmai
node server.cjs
```

### 2. 访问主页
- **PC端**: http://localhost:3000/index.html
- **H5端**: http://localhost:3000/index.html?mode=h5

### 3. 运行测试
- **在线测试**: http://localhost:3000/test-dashboard.html
- **命令行测试**: `node scripts/test-suspended-full.cjs`

---

## 📋 测试覆盖的6个层次

| 层次 | 测试重点 | 测试工具 | 状态 |
|------|---------|---------|------|
| 📚 文档层 | 测试文档完整性 | 文档检查 | ✅ |
| 📊 数据层 | JSON、Excel、备份 | 脚本验证 | ✅ |
| 🌐 API层 | 接口、数据格式 | HTTP请求 | ✅ |
| 💼 业务逻辑 | 过滤、计算、验证 | 逻辑测试 | ✅ |
| 🎨 前端层 | 显示、交互 | 浏览器测试 | ✅ |
| 👤 用户体验 | 实际使用场景 | 手动测试 | ✅ |

---

## ⚠️ 历史测试文件（待清理）

以下文件为历史测试文件，功能已整合到综合测试面板：

### 测试页面
- `test-flexible-tab.html` - 功能已整合
- `test-page.html` - 功能已整合
- `test-render.html` - 功能已整合
- `check-tabs.html` - 功能已整合
- `verify-tabs.html` - 功能已整合
- `verify-browser.html` - 功能已整合

### 测试脚本
- `test-enhanced.cjs` - 功能已整合
- `test-filtering.cjs` - 功能已整合
- `test-music-tab.cjs` - 功能已整合
- `test-quick-verify.cjs` - 功能已整合
- `test-ui-auto.cjs` - 功能已整合

**建议**: 这些文件可以移动到 `archive/` 目录或删除，避免混淆。

---

## ✅ 验收清单

- [x] 版本号机制（前后端统一）
- [x] 版本更新通知
- [x] 综合测试面板（17项测试）
- [x] H5模式自动切换
- [x] PC/H5导航区分
- [x] 测试思维方法论文档
- [x] 测试功能文档更新
- [x] 项目文件结构文档
- [x] 所有页面链接更新
- [x] 服务器配置更新

---

## 🎯 下一步计划

### 短期（1-2周）
1. 清理历史测试文件（移动到archive目录）
2. 测试覆盖率提升到95%
3. 性能优化（页面加载、API响应）

### 中期（1个月）
1. CI/CD集成测试
2. E2E测试自动化
3. 压力测试和兼容性测试

### 长期（持续）
1. 建立测试优先的文化
2. 定期测试培训
3. 质量监控告警

---

**维护者**: Claude AI
**最后更新**: 2026-01-28
**版本**: v1.0.7
