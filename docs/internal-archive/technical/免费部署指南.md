# ğŸš€ å…è´¹éƒ¨ç½²æŒ‡å— - Chiengmai Activities

## ğŸ“‹ éƒ¨ç½²æµç¨‹æ¦‚è§ˆ

```
æœ¬åœ°ä»£ç  â†’ GitHub â†’ Railway(åç«¯) + Vercel(å‰ç«¯) â†’ å…¬ç½‘è®¿é—®
```

**é¢„è®¡æ—¶é—´**: 20-30åˆ†é’Ÿ
**æˆæœ¬**: å®Œå…¨å…è´¹
**éš¾åº¦**: â­â­ (ä¸­ç­‰)

---

## æ­¥éª¤ 1: åˆ›å»º GitHub ä»“åº“

### 1.1 è®¿é—® GitHub

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®: https://github.com

### 1.2 åˆ›å»ºæ–°ä»“åº“

1. ç‚¹å‡»å³ä¸Šè§’ **+** â†’ **New repository**
2. å¡«å†™ä»“åº“ä¿¡æ¯:
   - **Repository name**: `chiangmai-activities`
   - **Description**: `æ¸…è¿ˆæ´»åŠ¨ç®¡ç†å¹³å°`
   - **Visibility**: âœ… Public (å…¬å¼€)
   - **ä¸è¦**å‹¾é€‰ "Add a README file"
   - **ä¸è¦**å‹¾é€‰ "Add .gitignore"

3. ç‚¹å‡» **Create repository**

### 1.3 æ¨é€ä»£ç åˆ° GitHub

åˆ›å»ºä»“åº“åï¼ŒGitHubä¼šæ˜¾ç¤ºæ¨é€å‘½ä»¤ã€‚åœ¨ä½ çš„ç»ˆç«¯æ‰§è¡Œ:

```bash
# æ·»åŠ è¿œç¨‹ä»“åº“ï¼ˆæ›¿æ¢ YOUR_USERNAMEï¼‰
git remote add origin https://github.com/YOUR_USERNAME/chiangmai-activities.git

# æ¨é€ä»£ç 
git branch -M main
git push -u origin main
```

**ç¤ºä¾‹**ï¼ˆå¦‚æœä½ çš„ç”¨æˆ·åæ˜¯ `zhangsan`ï¼‰:
```bash
git remote add origin https://github.com/zhangsan/chiangmai-activities.git
git push -u origin main
```

âœ… **å®Œæˆå**: ä½ çš„ä»£ç å·²ç»åœ¨ GitHub ä¸Šäº†ï¼

---

## æ­¥éª¤ 2: éƒ¨ç½²åç«¯åˆ° Railway

### 2.1 æ³¨å†Œ Railway

1. è®¿é—®: https://railway.app/
2. ç‚¹å‡» **Login** â†’ **Sign up with GitHub**
3. æˆæƒ Railway è®¿é—®ä½ çš„ GitHub

### 2.2 åˆ›å»ºæ–°é¡¹ç›®

1. ç™»å½•åï¼Œç‚¹å‡» **New Project** â†’ **Deploy from GitHub repo**
2. åœ¨ä»“åº“åˆ—è¡¨ä¸­æ‰¾åˆ° `chiangmai-activities`
3. ç‚¹å‡» **Select Repo**

### 2.3 é…ç½®åç«¯æœåŠ¡

Railway ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° Node.js é¡¹ç›®ï¼Œè‡ªåŠ¨é…ç½®ã€‚

**æ‰‹åŠ¨é…ç½®**ï¼ˆå¦‚æœéœ€è¦ï¼‰:

1. ç‚¹å‡»é¡¹ç›®è¿›å…¥è®¾ç½®
2. ç‚¹å‡» **New Service** â†’ é€‰æ‹© **GitHub Repo**
3. é€‰æ‹© `chiangmai-activities` ä»“åº“
4. åœ¨ **Root Directory** ç•™ç©ºï¼ˆæ ¹ç›®å½•ï¼‰
5. åœ¨ **Start Command** è¾“å…¥: `npm start`

### 2.4 é…ç½®ç¯å¢ƒå˜é‡

1. åœ¨é¡¹ç›®ä¸­ç‚¹å‡» **Variables** æ ‡ç­¾
2. æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡:

| Key | Value |
|-----|-------|
| `PORT` | `3000` |
| `NODE_ENV` | `production` |

### 2.5 é…ç½®æ•°æ®æŒä¹…åŒ–

**é‡è¦**: Railway é‡å¯åæ•°æ®ä¼šä¸¢å¤±ï¼Œéœ€è¦æŒä¹…åŒ–å­˜å‚¨ã€‚

1. ç‚¹å‡»é¡¹ç›® â†’ **Variables**
2. ç‚¹å‡» **New Variable**
3. é€‰æ‹© **Volume** ç±»å‹
4. é…ç½®:
   - **Mount Path**: `/app/data`
   - **Size**: 1 GB (å…è´¹é¢åº¦)

### 2.6 ä¿®æ”¹ä»£ç ï¼ˆå¦‚æœéœ€è¦ï¼‰

åˆ›å»º `data/.gitkeep` æ–‡ä»¶ç¡®ä¿æ•°æ®ç›®å½•å­˜åœ¨:

```bash
mkdir -p data
touch data/.gitkeep
```

### 2.7 è·å–åç«¯ URL

éƒ¨ç½²å®Œæˆåï¼ˆéœ€è¦1-2åˆ†é’Ÿï¼‰:

1. åœ¨ Railway é¡¹ç›®ä¸­æ‰¾åˆ°åç«¯æœåŠ¡
2. ç‚¹å‡»è¿›å…¥ï¼ŒæŸ¥çœ‹ **Settings** æ ‡ç­¾
3. æ‰¾åˆ° **Domains** æˆ– **Public Networking**
4. å¤åˆ¶ç”Ÿæˆçš„ URLï¼Œä¾‹å¦‚:
   ```
   https://chiangmai-api-production.up.railway.app
   ```

**API åœ°å€**: `https://chiangmai-api-production.up.railway.app/api`

âœ… **æµ‹è¯•åç«¯**:
```bash
curl https://chiangmai-api-production.up.railway.app/api/health
```

åº”è¯¥è¿”å›:
```json
{"success":true,"message":"API is running",...}
```

---

## æ­¥éª¤ 3: éƒ¨ç½²å‰ç«¯åˆ° Vercel

### 3.1 æ³¨å†Œ Vercel

1. è®¿é—®: https://vercel.com/
2. ç‚¹å‡» **Sign Up** â†’ **Continue with GitHub**
3. æˆæƒ Vercel è®¿é—®ä½ çš„ GitHub

### 3.2 å¯¼å…¥é¡¹ç›®

1. ç™»å½•åï¼Œç‚¹å‡» **Add New** â†’ **Project**
2. åœ¨ **Import Git Repository** åˆ—è¡¨ä¸­æ‰¾åˆ° `chiangmai-activities`
3. ç‚¹å‡» **Import**

### 3.3 é…ç½®é¡¹ç›®

Vercel ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° Vite + React é¡¹ç›®ã€‚

**é¡¹ç›®é…ç½®**:

| é¡¹ç›® | å€¼ |
|------|-----|
| **Framework Preset** | Vite |
| **Root Directory** | `/` |
| **Build Command** | `npm run build` |
| **Output Directory** | `dist` |
| **Install Command** | `npm install` |

### 3.4 é…ç½®ç¯å¢ƒå˜é‡

1. åœ¨ **Environment Variables** éƒ¨åˆ†æ·»åŠ :
   - **Key**: `VITE_API_URL`
   - **Value**: ä½ çš„ Railway åç«¯ URL
   - ä¾‹å¦‚: `https://chiangmai-api-production.up.railway.app`

2. ç‚¹å‡» **Add**

### 3.5 éƒ¨ç½²

1. ç‚¹å‡» **Deploy** æŒ‰é’®
2. ç­‰å¾… 1-2 åˆ†é’Ÿ
3. çœ‹åˆ° **Congratulations!** é¡µé¢

### 3.6 è·å–å‰ç«¯ URL

Vercel ä¼šç”Ÿæˆä¸€ä¸ª URLï¼Œä¾‹å¦‚:
```
https://gocnx.vercel.app
```

âœ… **æµ‹è¯•å‰ç«¯**: è®¿é—®è¯¥åœ°å€ï¼Œåº”è¯¥çœ‹åˆ°æ´»åŠ¨åˆ—è¡¨é¡µé¢ï¼

---

## æ­¥éª¤ 4: é…ç½® CORS

### 4.1 ä¿®æ”¹ server.js

å…è®¸å‰ç«¯åŸŸåè®¿é—®åç«¯:

```javascript
// æ‰¾åˆ° CORS é…ç½®éƒ¨åˆ†
app.use((req, res, next) => {
    const allowedOrigins = [
        'http://localhost:5173',
        'https://gocnx.vercel.app',
        // æ·»åŠ ä½ çš„ Vercel åŸŸå
    ];

    const origin = req.headers.origin;

    if (allowedOrigins.includes(origin)) {
        res.header('Access-Control-Allow-Origin', origin);
    }

    res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');

    if (req.method === 'OPTIONS') {
        return res.sendStatus(200);
    }

    next();
});
```

### 4.2 æäº¤å¹¶æ¨é€æ›´æ”¹

```bash
git add server.js
git commit -m "fix: é…ç½® CORS å…è®¸ Vercel å‰ç«¯è®¿é—®"
git push
```

Railway ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ã€‚

---

## æ­¥éª¤ 5: éªŒè¯éƒ¨ç½²

### 5.1 æ£€æŸ¥åç«¯

```bash
# å¥åº·æ£€æŸ¥
curl https://chiangmai-api-production.up.railway.app/api/health

# è·å–æ´»åŠ¨åˆ—è¡¨
curl https://chiangmai-api-production.up.railway.app/api/activities
```

### 5.2 æ£€æŸ¥å‰ç«¯

1. è®¿é—®ä½ çš„ Vercel URL
2. åº”è¯¥çœ‹åˆ°æ´»åŠ¨åˆ—è¡¨
3. ç‚¹å‡»"æ–°å¢æ´»åŠ¨"æµ‹è¯•
4. ä¸Šä¼ å›¾ç‰‡æµ‹è¯•

### 5.3 æµ‹è¯•è·¨åŸŸ

- åœ¨å‰ç«¯æ·»åŠ æ´»åŠ¨
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æ˜¯å¦æœ‰ CORS é”™è¯¯
- å¦‚æœæœ‰ï¼Œæ£€æŸ¥ server.js çš„ CORS é…ç½®

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1: Railway éƒ¨ç½²å¤±è´¥

**ç—‡çŠ¶**: Railway æ˜¾ç¤ºéƒ¨ç½²å¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥ **Logs** æ ‡ç­¾æŸ¥çœ‹é”™è¯¯æ—¥å¿—
2. ç¡®ä¿ `package.json` ä¸­æœ‰ `start` è„šæœ¬:
   ```json
   "scripts": {
     "start": "node server.js"
   }
   ```

### é—®é¢˜ 2: Vercel æ„å»ºå¤±è´¥

**ç—‡çŠ¶**: Vercel æ˜¾ç¤ºæ„å»ºé”™è¯¯

**è§£å†³**:
1. æ£€æŸ¥ **Build Logs** æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. ç¡®ä¿ `vite.config.js` é…ç½®æ­£ç¡®
3. æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°éƒ¨ç½²

### é—®é¢˜ 3: CORS é”™è¯¯

**ç—‡çŠ¶**: æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºè·¨åŸŸé”™è¯¯

**è§£å†³**:
1. ç¡®ä¿ server.js çš„ CORS é…ç½®åŒ…å«ä½ çš„ Vercel åŸŸå
2. æ£€æŸ¥ç¯å¢ƒå˜é‡ `VITE_API_URL` æ˜¯å¦æ­£ç¡®
3. é‡æ–°éƒ¨ç½² Railway å’Œ Vercel

### é—®é¢˜ 4: å›¾ç‰‡ä¸Šä¼ å¤±è´¥

**ç—‡çŠ¶**: ä¸Šä¼ å›¾ç‰‡æ—¶æŠ¥é”™

**è§£å†³**:
1. Railway å…è´¹ç‰ˆä¸æ”¯æŒæŒä¹…åŒ–å­˜å‚¨
2. å›¾ç‰‡åœ¨é‡å¯åä¼šä¸¢å¤±
3. è€ƒè™‘ä½¿ç”¨ Cloudinary ç­‰å…è´¹å›¾ç‰‡æœåŠ¡

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### å…è´¹é¢åº¦é™åˆ¶

| æœåŠ¡ | å…è´¹é¢åº¦ | è¶…é™å |
|------|----------|--------|
| **Railway** | $5/æœˆé¢åº¦ï¼Œ512MB RAM | ä¼‘çœ æˆ–æ‰£è´¹ |
| **Vercel** | 100GBå¸¦å®½/æœˆ | ä»˜è´¹æˆ–é™é€Ÿ |

### ä¼˜åŒ–å»ºè®®

1. **å›¾ç‰‡å­˜å‚¨**: ä½¿ç”¨ Cloudinary å…è´¹ç‰ˆï¼ˆ25GB/æœˆï¼‰
2. **æ•°æ®å¤‡ä»½**: å®šæœŸå¯¼å‡º data/items.json
3. **æ€§èƒ½ç›‘æ§**: ä½¿ç”¨ Vercel Analytics ç›‘æ§è®¿é—®é‡

---

## ğŸ‰ å®Œæˆï¼

ä½ çš„æ¸…è¿ˆæ´»åŠ¨ç®¡ç†å¹³å°å·²ç»éƒ¨ç½²åˆ°å…¬ç½‘ï¼

### è®¿é—®åœ°å€

- **å‰ç«¯**: https://gocnx.vercel.app
- **åç«¯**: https://chiangmai-api-production.up.railway.app
- **åå°ç®¡ç†**: https://gocnx.vercel.app/admin.html

### åˆ†äº«ç»™æœ‹å‹

ç›´æ¥å‘é€å‰ç«¯ URL ç»™æœ‹å‹å³å¯ï¼š
```
https://gocnx.vercel.app
```

---

**éœ€è¦å¸®åŠ©?**
- Railway æ–‡æ¡£: https://docs.railway.app/
- Vercel æ–‡æ¡£: https://vercel.com/docs
- é—®é¢˜åé¦ˆ: https://github.com/YOUR_USERNAME/chiangmai-activities/issues

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€
