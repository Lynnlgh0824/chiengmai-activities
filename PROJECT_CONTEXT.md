# PROJECT_CONTEXT.md - 项目上下文

> **项目**: Chiengmai Activities Platform (清迈活动策划管理系统)
> **版本**: v2.2.0
> **最后更新**: 2026-02-25
> **项目状态**: ✅ 活跃开发中

---

## 📖 项目概述

### 项目名称
**Chiengmai Activities Platform** - 清迈活动策划管理系统

### 一句话描述
一个面向清迈旅居者、数字游民和游客的本地活动信息聚合平台，提供智能活动管理与数据质量控制功能。

---

## 🎯 项目背景

### 问题与挑战

在清迈的生活场景中，用户面临着以下挑战：

1. **信息分散**
   - 活动信息散落在各个平台
   - 缺乏统一的信息入口
   - 信息更新不及时

2. **数据质量难以保证**
   - 活动描述重复
   - 必填字段缺失
   - 数据格式不一致

3. **管理效率低下**
   - 缺乏统一的管理工具
   - 手动维护成本高
   - 数据验证困难

### 解决方案

**Chiengmai Activities Platform** 提供：

- ✅ **统一管理** - 集中管理所有活动信息
- ✅ **数据质量控制** - 自动检测和修复数据问题
- ✅ **自动化工具** - 减少手动维护工作量
- ✅ **灵活扩展** - 支持自定义分类和状态

---

## 🏗️ 技术架构

### 技术栈概览

```
┌─────────────────────────────────────────────────┐
│                  前端层                          │
├─────────────────────────────────────────────────┤
│  HTML5 + CSS3 + 原生 JavaScript                 │
│  • 响应式设计                                    │
│  • 图片拖拽上传                                  │
│  • 实时数据验证                                  │
└─────────────────┬───────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────┐
│                  数据层                          │
├─────────────────────────────────────────────────┤
│  • JSON 文件存储 (data/items.json)              │
│  • 自动备份机制                                 │
│  • 本地存储缓存                                  │
└─────────────────┬───────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────────────────┐
│               自动化层                           │
├─────────────────────────────────────────────────┤
│  • GitHub Actions 工作流                         │
│  • Node.js 测试脚本                              │
│  • 自动修复工具                                  │
└─────────────────────────────────────────────────┘
```

### 核心技术

#### 1. 前端技术
- **纯 JavaScript** - 无框架依赖
- **LocalStorage** - 数据缓存
- **拖拽上传** - HTML5 Drag and Drop API
- **响应式设计** - CSS Media Queries

#### 2. 后端技术
- **Python HTTP Server** - 本地开发服务器
- **Node.js** - 自动化脚本运行环境
- **File System** - JSON 文件读写

#### 3. 自动化工具
- **GitHub Actions** - CI/CD 流程
- **ES Modules** - 现代JavaScript模块系统

---

## 🎨 设计理念

### 1. 数据质量优先 (Data Quality First)
- 自动检测数据问题
- 智能修复重复描述
- 验证必填字段完整性

### 2. 简单易用 (Simplicity)
- 纯静态部署
- 零学习成本
- 直观的操作界面

### 3. 自动化驱动 (Automation Driven)
- 自动备份数据
- 自动质量检查
- 自动修复问题

### 4. 本地优先 (Local-First)
- 数据存储在本地
- 无需服务器即可运行
- 用户完全掌控数据

---

## 📊 核心功能

### 1. 活动管理

#### 基础功能
- ✅ 创建、编辑、删除活动
- ✅ 活动分类管理
- ✅ 活动状态管理
- ✅ 图片上传和管理

#### 状态系统
| 状态 | 说明 | 默认行为 |
|------|------|----------|
| 📝 草稿 | 未发布状态 | 不计入统计 |
| ⏰ 待开始 | 已发布，未开始 | 显示倒计时 |
| 🚀 进行中 | 活动进行中 | 高亮显示 |
| 📅 已过期 | 活动已结束 | 降低透明度 |

---

### 2. 数据质量控制

#### 描述重复检测
```javascript
function detectDuplicateDescriptions(activities) {
    // 自动检测重复描述
    // 返回重复项列表
}
```

#### 智能修复
```javascript
function smartFixDescriptions(activities) {
    // 自动修复描述问题
    // 保留唯一描述
}
```

#### 完整性验证
```javascript
function validateActivity(activity) {
    // 验证必填字段
    // 检查数据格式
    // 返回验证结果
}
```

---

### 3. 自动化工具

#### 测试框架
- **test-framework.mjs** - 统一测试框架
- **数据验证测试** - 检测数据质量问题
- **功能测试** - 验证核心功能

#### 自动修复
- **auto-fix-all.mjs** - 一键修复所有问题
- **smart-fix-descriptions.mjs** - 智能描述修复
- **自动备份** - 修复前自动备份

#### GitHub Actions
- **数据质量检查** - 每次提交自动检查
- **自动化测试** - PR 触发测试
- **问题报告** - 自动生成问题报告

---

## 🎯 用户场景

### 场景 1：活动管理员

```
1. 打开 admin.html
2. 点击"添加活动"
3. 填写活动信息：
   - 标题、描述
   - 分类、状态
   - 开始/结束日期
4. 拖拽上传图片
5. 保存为草稿
6. 检查并发布
```

### 场景 2：数据质量检查

```
1. 运行测试框架
   node scripts/test-framework.mjs

2. 查看测试报告
   - 发现重复描述
   - 发现缺失字段

3. 运行自动修复
   node scripts/auto-fix-all.mjs

4. 验证修复结果
```

### 场景 3：用户浏览活动

```
1. 访问 index.html
2. 按分类筛选活动
3. 查看活动详情
4. 按状态筛选（进行中/待开始）
5. 获取活动信息
```

---

## 🔄 数据流向

### 数据保存流程

```
用户输入 (表单)
    │
    ▼
前端验证 (必填字段)
    │
    ▼
构建数据对象
    │
    ▼
保存到 LocalStorage (缓存)
    │
    ▼
写入 items.json (持久化)
    │
    ▼
自动备份 (备份文件)
```

### 数据验证流程

```
读取 items.json
    │
    ▼
解析 JSON 数据
    │
    ▼
运行验证规则
    │
    ├─── 描述重复检测
    ├─── 必填字段检查
    └─── 数据格式验证
    │
    ▼
生成验证报告
    │
    ▼
自动修复 (可选)
```

---

## 🎁 项目特色

### 1. 数据质量保证
- 自动检测数据问题
- 智能修复重复数据
- 完整性验证机制

### 2. 自动化工具
- GitHub Actions 集成
- 一键自动修复
- 自动备份保护

### 3. 零服务器部署
- 纯静态 HTML
- 可部署到任何静态托管
- GitHub Pages 免费托管

### 4. 图片管理
- 拖拽上传
- 图片预览
- 大小限制
- 类型验证

---

## 📈 数据统计

### 当前数据状态
- **总活动数**: 45+
- **活动分类**: 10+ 个
- **数据完整度**: 95%+
- **自动化测试覆盖**: 80%+

### 分类分布
| 分类 | 数量 | 占比 |
|------|------|------|
| 市集 | 17 | 38% |
| 音乐 | 6 | 13% |
| 冥想 | 6 | 13% |
| 运动 | 4 | 9% |
| 其他 | 12 | 27% |

---

## 🛠️ 扩展性

### 可扩展方向

1. **用户系统**
   - 用户注册和登录
   - 个人收藏功能
   - 活动报名功能

2. **通知系统**
   - 活动提醒
   - 状态变更通知
   - 邮件订阅

3. **数据分析**
   - 活动统计图表
   - 热门活动排行
   - 用户行为分析

4. **地图集成**
   - 活动位置标注
   - 距离计算
   - 导航功能

---

## 📚 相关项目

### 关联项目
- **[project-summary](../project-summary/)** - 项目日志管理系统
- **[english-learning](../english-learning/)** - 英语学习项目

### 参考资源
- 清迈本地活动信息
- 社区反馈和建议
- 用户使用数据

---

## 🚀 未来规划

### 短期目标 (Q1 2026)
- [ ] 优化移动端体验
- [ ] 添加搜索功能
- [ ] 实现活动收藏
- [ ] 添加分享功能

### 中期目标 (Q2 2026)
- [ ] 用户系统开发
- [ ] 活动报名功能
- [ ] 通知系统
- [ ] 地图集成

### 长期愿景
- [ ] 多城市扩展
- [ ] 移动应用开发
- [ ] 商业化探索
- [ ] 社区建设

---

## 🔗 相关链接

- **项目仓库**: [chiangmai-activities](https://github.com/Lynnlgh0824/chiangmai-activities)
- **在线演示**: https://chiangmai-activities.vercel.app
- **问题反馈**: [Issues](https://github.com/Lynnlgh0824/chiangmai-activities/issues)
- **更新日志**: [CHANGELOG.md](./CHANGELOG.md)

---

## 📞 联系方式

- **维护者**: Lynnlgh0824
- **项目状态**: ✅ 活跃开发中
- **最后更新**: 2026-02-25

---

**文档版本**: v1.0.0
**创建时间**: 2026-02-25
**维护者**: Chiengmai Team
